{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/arch/Downloads/business-consulting/src/app/components/utils/supabase/server.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\n\nif (!supabaseUrl || !supabaseKey) {\n  throw new Error(\"Missing Supabase environment variables!\");\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseKey);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///home/arch/Downloads/business-consulting/src/app/components/utils/supabase/blogService.ts"],"sourcesContent":["import { supabase } from \"./server\";\n\ninterface BlogSectionInput {\n  heading: string;\n  content: string;\n  section_order: number;\n}\n\nexport async function createBlogPost(\n  title: string,\n  author: string,\n  thumbnail: string,\n  sections: BlogSectionInput[],\n) {\n  try {\n    // Insert blog post\n    const { data: post, error: postError } = await supabase\n      .from(\"blog_posts\")\n      .insert([{ title, author, thumbnail }])\n      .select(\"id\")\n      .single();\n\n    if (postError) throw postError;\n    if (!post) throw new Error(\"Failed to create blog post\");\n\n    // Insert sections\n    const sectionsWithBlogId = sections.map((s, i) => ({\n      blog_id: post.id,\n      heading: s.heading,\n      content: s.content,\n      section_order: i,\n    }));\n\n    const { error: sectionError } = await supabase\n      .from(\"blog_sections\")\n      .insert(sectionsWithBlogId);\n\n    if (sectionError) throw sectionError;\n\n    return post;\n  } catch (err) {\n    console.error(\"Error creating blog:\", err);\n    throw err;\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAQO,eAAe,eACpB,KAAa,EACb,MAAc,EACd,SAAiB,EACjB,QAA4B;IAE5B,IAAI;QACF,mBAAmB;QACnB,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,mKAAQ,CACpD,IAAI,CAAC,cACL,MAAM,CAAC;YAAC;gBAAE;gBAAO;gBAAQ;YAAU;SAAE,EACrC,MAAM,CAAC,MACP,MAAM;QAET,IAAI,WAAW,MAAM;QACrB,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAE3B,kBAAkB;QAClB,MAAM,qBAAqB,SAAS,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;gBACjD,SAAS,KAAK,EAAE;gBAChB,SAAS,EAAE,OAAO;gBAClB,SAAS,EAAE,OAAO;gBAClB,eAAe;YACjB,CAAC;QAED,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,mKAAQ,CAC3C,IAAI,CAAC,iBACL,MAAM,CAAC;QAEV,IAAI,cAAc,MAAM;QAExB,OAAO;IACT,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///home/arch/Downloads/business-consulting/src/app/components/utils/supabase/uploadThumbnail.ts"],"sourcesContent":["import { supabase } from \"./server\";\n\nexport async function uploadThumbnail(file: File): Promise<string | null> {\n  try {\n    const fileExt = file.name.split(\".\").pop();\n    const fileName = `${Date.now()}.${fileExt}`;\n    const filePath = `thumbnails/${fileName}`;\n\n    // Upload file with explicit content type and cache control\n    const { error: uploadError } = await supabase.storage\n      .from(\"blog-thumbnails\")\n      .upload(filePath, file, {\n        contentType: file.type || \"application/octet-stream\",\n        cacheControl: \"3600\",\n        upsert: true,\n      });\n\n    if (uploadError) {\n      console.error(\"Error uploading file:\", uploadError);\n      return null;\n    }\n\n    // Get public URL\n    const { data } = supabase.storage\n      .from(\"blog-thumbnails\")\n      .getPublicUrl(filePath);\n\n    return data.publicUrl;\n  } catch (err) {\n    console.error(\"Upload failed:\", err);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,gBAAgB,IAAU;IAC9C,IAAI;QACF,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;QACxC,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;QAC3C,MAAM,WAAW,CAAC,WAAW,EAAE,UAAU;QAEzC,2DAA2D;QAC3D,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,mKAAQ,CAAC,OAAO,CAClD,IAAI,CAAC,mBACL,MAAM,CAAC,UAAU,MAAM;YACtB,aAAa,KAAK,IAAI,IAAI;YAC1B,cAAc;YACd,QAAQ;QACV;QAEF,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;QACT;QAEA,iBAAiB;QACjB,MAAM,EAAE,IAAI,EAAE,GAAG,mKAAQ,CAAC,OAAO,CAC9B,IAAI,CAAC,mBACL,YAAY,CAAC;QAEhB,OAAO,KAAK,SAAS;IACvB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///home/arch/Downloads/business-consulting/src/app/blogform/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { createBlogPost } from \"../components/utils/supabase/blogService\";\nimport { uploadThumbnail } from \"../components/utils/supabase/uploadThumbnail\";\n\nexport default function BlogForm() {\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [thumbnail, setThumbnail] = useState<File | null>(null);\n  const [sections, setSections] = useState([\n    { heading: \"\", content: \"\", section_order: 0 },\n  ]);\n\n  const addSection = () =>\n    setSections([\n      ...sections,\n      { heading: \"\", content: \"\", section_order: sections.length },\n    ]);\n\n  const updateSection = (index: number, field: string, value: string) => {\n    const updated = [...sections];\n    if (field === 'heading' || field === 'content') {\n      updated[index] = { ...updated[index], [field]: value };\n    }\n    setSections(updated);\n  };\n\n  const submit = async () => {\n    let thumbnailUrl = \"\";\n\n    if (thumbnail) {\n      const uploadedUrl = await uploadThumbnail(thumbnail);\n      if (!uploadedUrl) {\n        alert(\"Failed to upload thumbnail\");\n        return;\n      }\n      thumbnailUrl = uploadedUrl;\n    }\n\n    const success = await createBlogPost(title, author, thumbnailUrl, sections);\n\n    if (success) {\n      alert(\"Blog created successfully!\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">Create Blog</h1>\n\n      <input\n        type=\"text\"\n        placeholder=\"Title\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        className=\"border p-2 w-full mb-4\"\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Author\"\n        value={author}\n        onChange={(e) => setAuthor(e.target.value)}\n        className=\"border p-2 w-full mb-4\"\n      />\n      <input\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={(e) => setThumbnail(e.target.files?.[0] ?? null)}\n        className=\"border p-2 w-full mb-4\"\n      />\n\n      <h2 className=\"text-xl font-semibold mb-2\">Sections</h2>\n      {sections.map((s, i) => (\n        <div key={i} className=\"mb-4 border p-2\">\n          <input\n            type=\"text\"\n            placeholder=\"Heading\"\n            value={s.heading}\n            onChange={(e) => updateSection(i, \"heading\", e.target.value)}\n            className=\"border p-2 w-full mb-2\"\n          />\n          <textarea\n            placeholder=\"Content\"\n            value={s.content}\n            onChange={(e) => updateSection(i, \"content\", e.target.value)}\n            className=\"border p-2 w-full\"\n          />\n        </div>\n      ))}\n      <button\n        onClick={addSection}\n        className=\"bg-blue-500 text-white px-4 py-2 rounded mr-2\"\n      >\n        Add Section\n      </button>\n      <button\n        onClick={submit}\n        className=\"bg-green-500 text-white px-4 py-2 rounded\"\n      >\n        Publish Blog\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAc;IACxD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACvC;YAAE,SAAS;YAAI,SAAS;YAAI,eAAe;QAAE;KAC9C;IAED,MAAM,aAAa,IACjB,YAAY;eACP;YACH;gBAAE,SAAS;gBAAI,SAAS;gBAAI,eAAe,SAAS,MAAM;YAAC;SAC5D;IAEH,MAAM,gBAAgB,CAAC,OAAe,OAAe;QACnD,MAAM,UAAU;eAAI;SAAS;QAC7B,IAAI,UAAU,aAAa,UAAU,WAAW;YAC9C,OAAO,CAAC,MAAM,GAAG;gBAAE,GAAG,OAAO,CAAC,MAAM;gBAAE,CAAC,MAAM,EAAE;YAAM;QACvD;QACA,YAAY;IACd;IAEA,MAAM,SAAS;QACb,IAAI,eAAe;QAEnB,IAAI,WAAW;YACb,MAAM,cAAc,MAAM,IAAA,mLAAe,EAAC;YAC1C,IAAI,CAAC,aAAa;gBAChB,MAAM;gBACN;YACF;YACA,eAAe;QACjB;QAEA,MAAM,UAAU,MAAM,IAAA,8KAAc,EAAC,OAAO,QAAQ,cAAc;QAElE,IAAI,SAAS;YACX,MAAM;QACR;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAU;;;;;;0BAEZ,8OAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gBACzC,WAAU;;;;;;0BAEZ,8OAAC;gBACC,MAAK;gBACL,QAAO;gBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;gBACrD,WAAU;;;;;;0BAGZ,8OAAC;gBAAG,WAAU;0BAA6B;;;;;;YAC1C,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,8OAAC;oBAAY,WAAU;;sCACrB,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,OAAO,EAAE,OAAO;4BAChB,UAAU,CAAC,IAAM,cAAc,GAAG,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC3D,WAAU;;;;;;sCAEZ,8OAAC;4BACC,aAAY;4BACZ,OAAO,EAAE,OAAO;4BAChB,UAAU,CAAC,IAAM,cAAc,GAAG,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC3D,WAAU;;;;;;;mBAZJ;;;;;0BAgBZ,8OAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;0BAGD,8OAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}}]
}